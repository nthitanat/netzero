# GitHub Copilot Instructions for NetZero React Project

## Project Architecture Overview
This is a React SPA using Create React App with a custom 4-file component architecture pattern and centralized SCSS system. Follow these rules strictly for all code suggestions.

## Component Structure Requirements

### Mandatory 4-File Pattern
Every component and page MUST follow this structure:
```
ComponentName/
├── ComponentName.jsx          # React component (presentation only)
├── ComponentName.module.scss  # Scoped SCSS styles
├── useComponentName.js        # Custom hook for state management
└── ComponentNameHandler.js    # Business logic and event handlers
```

### Component File Template (.jsx)
```jsx
import React from "react";
import styles from "./ComponentName.module.scss";
import useComponentName from "./useComponentName";
import ComponentNameHandler from "./ComponentNameHandler";

export default function ComponentName({ /* props */ }) {
    const { stateComponentName, setComponentName } = useComponentName();
    const handlers = ComponentNameHandler(stateComponentName, setComponentName);
    
    return (
        <div className={styles.Container}>
            {/* JSX content here */}
        </div>
    );
}
```

### Custom Hook Template (.js)
```javascript
import { useState } from "react";

const useComponentName = (initialProps) => {
  const [stateComponentName, setState] = useState({
    // initial state properties
  });

  const setComponentName = (field, value) => {
    if (typeof field === "object") {
      setState((prevState) => ({ ...prevState, ...field }));
    } else {
      setState((prevState) => ({ ...prevState, [field]: value }));
    }
  };

  const toggleComponentNameField = (field) => {
    setComponentName((prevState) => ({
      ...prevState,
      [field]: !prevState[field],
    }));
  };

  return {
    stateComponentName,
    setComponentName,
    toggleComponentNameField,
  };
};

export default useComponentName;
```

### Handler File Template (.js)
```javascript
import styles from "./ComponentName.module.scss";

const ComponentNameHandler = (stateComponentName, setComponentName) => {
  return {
    handleSomeAction: () => {
      // business logic here
    },
    // other handlers...
  };
};

export default ComponentNameHandler;
```

## SCSS System Rules (CRITICAL)

### Mandatory SCSS Structure
Every `.module.scss` file MUST start with:
```scss
@import "src/styles/main";

.Container {
  // styles here using mixins
}
```

### Color System - Use Mixins Only
NEVER use hardcoded hex colors. Always use these mixins:

```scss
// Text colors
@include text-color-palette("primary-color-1");

// Background colors
@include bg-color-palette("secondary-color-2");

// Borders
@include border-color-palette("primary-color-3", 2px);

// Shadows
@include shawdow-palette("primary-color-1", 0.3);
```

### Available Color Tokens
```scss
// Primary Colors
"primary-color-1" // #206246 (Dark Green)
"primary-color-2" // #11955E (Medium Green)
"primary-color-3" // #45CE69 (Light Green)
"primary-color-4" // #78D988 (Lightest Green)

// Secondary Colors
"secondary-color-1" // #DE5C8E (Dark Pink)
"secondary-color-2" // #E979A4 (Medium Pink)
"secondary-color-3" // #F798BD (Light Pink)
"secondary-color-4" // #F7B7CF (Lightest Pink)

// Activity Colors
"active-300", "active-200", "active-100", "inactive", "warning", "black", "white"
```

### Font System - Use Mixins Only
NEVER use hardcoded pixel values for fonts:

```scss
// Font sizes
@include font-size-palette("headline-3");
```

### Available Font Tokens
```scss
// Headlines: "headline-1" (46px), "headline-2" (36px), "headline-3" (24px), "headline-4" (22px), "headline-5" (18px)
// Body: "body-1" (16px), "body-2" (14px), "body-3" (12px), "body-4" (10px)
```

### Animation Mixins
Use provided animation mixins:
```scss
@include expand-animation(0.3s, 200px, 300px);
@include fade-in-animation(0.5s);
@include shrink-animation(0.2s);
@include fade-out-animation(0.3s);
```

## Naming Conventions
- **Components/Pages**: PascalCase (`Button`, `ProductDetail`)
- **Hooks**: camelCase with "use" prefix (`useButton`, `useProductDetail`)
- **Handlers**: PascalCase with "Handler" suffix (`ButtonHandler`, `ProductDetailHandler`)
- **CSS Classes**: PascalCase (`.Container`, `.ButtonWrapper`)
- **State Objects**: camelCase with component prefix (`stateButton`, `stateProductDetail`)

## API Service Architecture

### API Structure Rules
All API communication must follow this centralized pattern:

#### Axios Instance Configuration
```javascript
// src/api/axiosInstance.js - Centralized HTTP client
import axios from "axios";

const axiosInstance = axios.create({
  baseURL: process.env.REACT_APP_API_BASE_URL,
  timeout: 10000,
  headers: {
    "Content-Type": "application/json",
  },
});

// Request Interceptor for auth tokens
axiosInstance.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem("token");
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// Response Interceptor for global error handling
axiosInstance.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // Handle unauthorized access
    }
    return Promise.reject(error);
  }
);

export default axiosInstance;
```

#### Service File Pattern
Each API domain should have its own service file:

```javascript
// src/api/[domain]Service.js
import axiosInstance from "./axiosInstance";

// GET requests
export const getItems = (params) => 
  axiosInstance.get("/items", { params });

export const getItemById = (id) => 
  axiosInstance.get(`/items/${id}`);

// POST requests
export const createItem = (data) => 
  axiosInstance.post("/items", data);

// PUT requests
export const updateItem = (id, data) => 
  axiosInstance.put(`/items/${id}`, data);

// DELETE requests
export const deleteItem = (id) => 
  axiosInstance.delete(`/items/${id}`);

// Complex operations
export const getItemsWithFilters = (filters) => 
  axiosInstance.get("/items/search", { 
    params: filters 
  });
```

### API Service Rules
1. **Always use axiosInstance** - Never import axios directly in services
2. **One service per domain** - Group related endpoints (userService, productService, etc.)
3. **Export named functions** - Use descriptive function names for each endpoint
4. **Handle parameters properly** - Use params for query strings, data for request body
5. **Consistent naming** - Use REST conventions (get, create, update, delete)

### API Integration in Components
Use services in handlers, never directly in components:

```javascript
// ComponentHandler.js
import { getItems, createItem } from "../api/itemService";

const ComponentHandler = (stateComponent, setComponent) => {
  return {
    handleFetchItems: async () => {
      try {
        setComponent("loading", true);
        const response = await getItems();
        setComponent("items", response.data);
      } catch (error) {
        setComponent("error", error.message);
      } finally {
        setComponent("loading", false);
      }
    },

    handleCreateItem: async (itemData) => {
      try {
        setComponent("submitting", true);
        const response = await createItem(itemData);
        setComponent("newItem", response.data);
      } catch (error) {
        setComponent("error", error.message);
      } finally {
        setComponent("submitting", false);
      }
    },
  };
};
```

## File Organization
```
src/
├── api/              # API services and axios configuration
│   ├── axiosInstance.js    # Centralized HTTP client
│   ├── userService.js      # User-related API calls
│   ├── productService.js   # Product-related API calls
│   └── catService.js       # Example service file
├── assets/           # Static assets (icons, images)
├── components/       # Component organization by purpose
│   ├── index.js           # Main components barrel export
│   ├── common/            # Reusable components across pages
│   │   ├── index.js      # Common components barrel export
│   │   ├── ImageSlideshow/    # Generic image carousel
│   │   ├── ThaiIcon/          # Thai-themed icons
│   │   ├── OrganicDecoration/ # Background decorations
│   │   └── ThaiHeader/        # Thai-themed header
│   └── [pageName]/        # Page-specific components (e.g., events/)
│       ├── index.js      # Page components barrel export
│       ├── EventCard/    # Event display cards
│       └── RecommendedCarousel/ # Events carousel
├── pages/           # Page components (4-file pattern)
├── styles/          # Global SCSS system
├── fonts/           # Custom font files
└── data/            # Static data files
```

## Component Organization Rules

### Component Categorization
Components MUST be organized into two categories:

#### 1. Common Components (`src/components/common/`)
- **Purpose**: Reusable across multiple pages/features
- **Examples**: ImageSlideshow, ThaiIcon, OrganicDecoration, ThaiHeader
- **Rule**: If a component can be used in 2+ different page contexts, it belongs here
- **Import Pattern**: `import { ComponentName } from '../../components/common';`

#### 2. Page-Specific Components (`src/components/[pageName]/`)
- **Purpose**: Specific to one page or feature set
- **Examples**: EventCard, RecommendedCarousel (events-specific)
- **Rule**: If a component is tightly coupled to specific page logic, create a page folder
- **Import Pattern**: `import { ComponentName } from '../../components/events';`

### Component Dependencies Rules
- ✅ **Common components** can depend on other common components
- ✅ **Page-specific components** can depend on common components
- ✅ **Pages** can depend on both common and relevant page-specific components
- ❌ **Common components** should NEVER depend on page-specific components
- ❌ **Page-specific components** should NEVER depend on other page-specific components

### Barrel Export Requirements
Every component folder MUST have an `index.js` file for clean imports:

```javascript
// src/components/common/index.js
export { default as ImageSlideshow } from './ImageSlideshow/ImageSlideshow';
export { default as ThaiIcon } from './ThaiIcon/ThaiIcon';
export { default as OrganicDecoration } from './OrganicDecoration/OrganicDecoration';
export { default as ThaiHeader } from './ThaiHeader/ThaiHeader';

// src/components/events/index.js
export { default as EventCard } from './EventCard/EventCard';
export { default as RecommendedCarousel } from './RecommendedCarousel/RecommendedCarousel';

// src/components/index.js
export * from './common';
export * from './events';
```

### Import Patterns (MANDATORY)
Always use barrel exports for cleaner, maintainable imports:

```jsx
// ✅ CORRECT: Clean barrel imports
import { ImageSlideshow, ThaiIcon } from '../../components/common';
import { EventCard, RecommendedCarousel } from '../../components/events';

// ❌ WRONG: Direct path imports
import ImageSlideshow from '../../components/common/ImageSlideshow/ImageSlideshow';
import EventCard from '../../components/events/EventCard/EventCard';
```

## Code Generation Rules

### When creating new components:
1. Always generate all 4 files following the templates above
2. Import global SCSS system in `.module.scss`
3. Use centralized color and font mixins
4. Separate concerns: presentation → state → logic → styling
5. Follow exact naming conventions
6. **Determine component category**: Common (reusable) vs Page-specific
7. **Place in correct folder**: `common/` or `[pageName]/`
8. **Update barrel exports**: Add to relevant `index.js` file
9. **Use barrel imports**: Import from category folders, not direct paths

### SCSS File Rules:
1. MUST start with `@import "src/styles/main";`
2. NEVER use hardcoded colors or font sizes
3. ALWAYS use color and font mixins
4. Use PascalCase for CSS class names
5. Keep styles scoped to component containers

### Hook Rules:
1. Always provide setter functions for state updates
2. Include toggle functions for boolean fields
3. Support both object and single field updates
4. Use camelCase with component prefix for state names

### Handler Rules:
1. Import component styles for any style-related logic
2. Receive state and setter as parameters
3. Return object with handler functions
4. Keep all business logic separate from presentation
5. **API calls belong in handlers** - Never call APIs directly from components
6. **Use try-catch blocks** - Always handle API errors properly
7. **Loading states** - Set loading state before API calls, clear after completion

## Import/Export Patterns
- Components: Default exports with PascalCase names
- Hooks: Default exports with "use" prefix
- Handlers: Default exports with "Handler" suffix
- Relative imports for component dependencies
- Centralized exports in index files where appropriate

## Key Principles for Suggestions
1. **Separation of Concerns**: Never mix presentation, state, logic, or styling
2. **Centralized Styling**: All colors, fonts, and animations from global system
3. **Consistency**: Every component follows exact same pattern
4. **Design System Compliance**: Enforce centralized variables usage
5. **Maintainability**: Single responsibility per file
6. **Testability**: Separated concerns for easy unit testing

## Common Mistakes to Avoid
- ❌ Hardcoding colors (#206246) or font sizes (24px)
- ❌ Missing `@import "src/styles/main";` in SCSS files
- ❌ Mixing business logic in component files
- ❌ Creating inline animations instead of using mixins
- ❌ Not following the 4-file component pattern
- ❌ Using camelCase for CSS class names instead of PascalCase
- ❌ Importing axios directly instead of using axiosInstance
- ❌ Making API calls directly in component files
- ❌ Not handling loading/error states for API calls
- ❌ Creating multiple axios instances instead of using the centralized one
- ❌ **Placing components in wrong category** (common vs page-specific)
- ❌ **Using direct imports** instead of barrel exports
- ❌ **Missing barrel export updates** when adding new components
- ❌ **Creating page-specific component dependencies** between different pages

## CLI Tool Usage
Suggest using the component generator for scaffolding:
```bash
# For common components (reusable)
npm run gen-component src/components/common/NewComponent

# For page-specific components  
npm run gen-component src/components/[pageName]/NewComponent

# For pages
npm run gen-component src/pages/NewPage
```

**After creating components:**
1. Update the appropriate barrel export file (`index.js`)
2. Verify imports use barrel export pattern
3. Ensure component follows the 4-file pattern
4. Test that the component is properly categorized

When suggesting code, always follow these patterns and use the centralized SCSS system. No exceptions to these architectural rules.
